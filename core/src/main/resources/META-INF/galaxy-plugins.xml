<?xml version="1.0" encoding="UTF-8"?>
<galaxy-plugins xmlns="http://www.mulesource.org/schema/galaxy-plugin"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="
       http://www.mulesource.org/schema/galaxy-plugin http://www.mulesource.org/schema/galaxy-plugin/galaxy-plugin-1.0.xsd">
    <galaxy-plugin>
        <name>WS-Policy Documents</name>
        <description>Allows WSDL-Policy Documents to be managed by Galaxy.</description>
        <content-type>application/policy+xml</content-type>
        <!--<small-icon>META-INF/images/policy_16x16.png</small-icon>-->
        <!--<large-icon>META-INF/images/policy_32x32.png</large-icon>-->
        <namespace>
            <local-name>policy</local-name>
            <uri>http://schemas.xmlsoap.org/ws/2004/09/policy</uri>
        </namespace>
        <namespace>
            <local-name>policy</local-name>
            <uri>http://http://www.w3.org/2006/07/ws-policy</uri>
        </namespace>
    </galaxy-plugin>

    <galaxy-plugin>
        <name>Xml Schema Documents</name>
        <description>Allows Xml Schema Documents to be managed by Galaxy.</description>
        <content-type>application/xmlschema+xml</content-type>
        <!--<small-icon>META-INF/images/xmlschema_16x16.png</small-icon>-->
        <!--<large-icon>META-INF/images/xmlschema_32x32.png</large-icon>-->
        <namespace>
            <local-name>schema</local-name>
            <uri>http://www.w3.org/2001/XMLSchema</uri>
        </namespace>
    </galaxy-plugin>

    <galaxy-plugin>
        <name>Xslt Documents</name>
        <description>Allows Xslt Documents to be managed by Galaxy.</description>
        <content-type>application/xslt+xml</content-type>
        <!--<small-icon>META-INF/images/xslt_16x16.png</small-icon>-->
        <!--<large-icon>META-INF/images/xslt_32x32.png</large-icon>-->
        <namespace>
            <local-name>stylesheet</local-name>
            <uri>http://www.w3.org/1999/XSL/Transform</uri>
        </namespace>
    </galaxy-plugin>

    <galaxy-plugin>
        <name>WSDL Documents</name>
        <description>Allows WSDL Documents to be managed by Galaxy. Users can register, query and view WSDL documents with this plugin.
        </description>
        <content-type>application/wsdl+xml</content-type>
        <!--<small-icon>META-INF/images/wsdl_16x16.png</small-icon>-->
        <!--<large-icon>META-INF/images/wsdl_32x32.png</large-icon>-->
        <namespace>
            <local-name>definitions</local-name>
            <uri>http://schemas.xmlsoap.org/wsdl/</uri>
        </namespace>
        <indexes>
            <index>
                <field-name>wsdl.service</field-name>
                <display-name>WSDL Services</display-name>
                <description>WSDL Service Definitions</description>
                <language>XQUERY</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[
declare namespace wsdl="${namespace.uri}";
declare variable $document external;
<values> {
    for $svc in $document//wsdl:service
    let $ns := $document/wsdl:definition/@targetNamespace
    return <value>{data($svc/@name)}</value>
} </values>
                    ]]>
                </expression>
            </index>
            <index>
                <field-name>wsdl.endpoint</field-name>
                <display-name>WSDL Endpoints</display-name>
                <description>WSDL Endpoint Definitions</description>
                <language>XQUERY</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[
declare namespace wsdl="${namespace.uri}";
declare variable $document external;
<values> {
    for $ep in $document//wsdl:service/wsdl:port
    let $ns := $document/wsdl:definition/@targetNamespace
    return <value>{data($ep/@name)}</value>
} </values>
                    ]]>
                </expression>
            </index>
            <index>
                <field-name>wsdl.binding</field-name>
                <display-name>WSDL Bindings</display-name>
                <description>WSDL Binding Definitions</description>
                <language>XQUERY</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[
declare namespace wsdl="${namespace.uri}";
declare variable $document external;
<values> {
    for $b in $document//wsdl:binding
    let $ns := $document/wsdl:definition/@targetNamespace
    return <value>{data($b/@name)}</value>
} </values>
                    ]]>
                </expression>
            </index>
            <index>
                <field-name>wsdl.portType</field-name>
                <display-name>WSDL PortTypes</display-name>
                <description>WSDL PortType Definitions</description>
                <language>XQUERY</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[
declare namespace wsdl="${namespace.uri}";
declare variable $document external;
<values> {
    for $pt in $document//wsdl:portType
    let $ns := $document/wsdl:definition/@targetNamespace
    return <value>{data($pt/@name)}</value>
} </values>
                    ]]>
                </expression>
            </index>
            <index>
                <field-name>wsdl.targetNamespace</field-name>
                <display-name>WSDL Target Namespace</display-name>
                <description>WSDL Target Namespace Definition</description>
                <language>XPATH</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[/*/@targetNamespace]]>
                </expression>
            </index>
        </indexes>
        <views>
            <view>
                <column column="3">
                    <name>Target Namespace</name>
                    <expression>artifact.getProperty("wsdl.targetNamespace")</expression>
                </column>
                <column>
                    <name>Services</name>
                    <expression>artifact.hasProperty("wsdl.service") ? artifact.getProperty("wsdl.service").size() : "0" ;</expression>
                </column>
                <column>
                    <name>Bindings</name>
                    <expression>artifact.hasProperty("wsdl.binding") ? artifact.getProperty("wsdl.binding").size() : "0" ;</expression>
                </column>
                <column>
                    <name>Port Types</name>
                    <expression>artifact.hasProperty("wsdl.portType") ? artifact.getProperty("wsdl.portType").size() : "0" ;</expression>
                </column>
            </view>
        </views>
    </galaxy-plugin>
    
    <galaxy-plugin>
        <name>Spring Configurations</name>
        <description>Allows Spring Bean cofiguration files to be managed by Galaxy. Users can register, query and view Spring
            configuration files with this plugin.
        </description>
        <content-type>application/spring+xml</content-type>
        <!--<small-icon>META-INF/images/spring_16x16.png</small-icon>-->
        <!--<large-icon>META-INF/images/spring_32x32.png</large-icon>-->
        <namespace>
            <local-name>beans</local-name>
            <uri>http://www.springframework.org/schema/beans</uri>
        </namespace>
        <indexes>
            <index>
                <field-name>spring.description</field-name>
                <display-name>Spring Description</display-name>
                <description>The description for the Spring configuration</description>
                <language>XPATH</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[/*[local-name()='${namespace.local-name}' and namespace-uri()='${namespace.uri}']/*[local-name()='description']
                ]]></expression>
            </index>
            <index>
                <field-name>spring.bean</field-name>
                <display-name>Spring Beans</display-name>
                <description>Indexes all bean elements in a Spring Configuration. The beans will be indexed by name first, then by id</description>
                <language>XQUERY</language>
                <search-input-type>java.lang.String</search-input-type>
                <expression><![CDATA[
declare default element namespace "http://www.springframework.org/schema/beans";
declare variable $document external;
<values> {
    for $e in $document//bean
        return if ($e/@name)
               then <value>{data($e/@name)}</value>
               else <value>{data($e/@id)}</value>
   }</values>
]]>
                </expression>
            </index>
        </indexes>
        <views>
            <view>
                <column>
                    <name>Beans</name>
                    <expression>artifact.hasProperty("spring.bean") ? artifact.getProperty("spring.bean").size() : "0" ;</expression>
                </column>
            </view>
        </views>
    </galaxy-plugin>
</galaxy-plugins>
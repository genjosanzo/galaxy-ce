<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xmlns:a="http://abdera.apache.org"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
    http://abdera.apache.org http://abdera.apache.org/schemas/abdera-spring.xsd">

  
  <!-- Abdera -->
  <a:serviceContext>
  
    <a:provider>
      <ref bean="provider"/>
    </a:provider>
    
    <a:targetResolver>
     <a:regexTargetResolver>

        <a:collection>/repository/workspaces/([^/#?]+)(\?[^#]*)?</a:collection>
        <a:entry>/repository/workspaces/([^/#?]+)/([^/#?]+).atom(\?[^#]*)?</a:entry>
        <a:media>/repository/workspaces/([^/#?]+)/media/([^/#?]+)(\?[^#]*)?</a:media>
        
        <a:service>/repository/(\?[^#]*)?</a:service>
      </a:regexTargetResolver> 
    </a:targetResolver>
    
  </a:serviceContext>

  <bean id="provider" class="org.apache.abdera.protocol.server.impl.WorkspaceProvider">
    <property name="workspaces">
      <list value-type="org.apache.abdera.protocol.server.WorkspaceInfo">
        <bean class="org.mule.galaxy.atom.ArtifactWorkspaceInfo">
          <property name="registry" ref="registry"/>
        </bean>
      </list>
    </property>
  </bean>
  
</beans>